import{u as e,r as a,v as l,x as s,b as u,o,g as t,n,c as i,f as r,y as c,m as d,t as v,F as p,ca as f,E as m}from"./index.4bf722b3.js";import{u as b,z as y,a as _}from"./useExcel.35fcdafa.js";import"./index.bfe593bd.js";const k={class:"minions-content"},h={class:"minions-head"},C=n("div",null,null,-1),x={class:"btn-cont"},w={class:"minions-body"},L=n("a",null,"删除",-1),E=n("div",{class:"info-header"},"新增股票",-1),g={class:"info-content"},S={key:0,style:{color:"red"}},U={key:1},q={__name:"stockZcw",setup(q){const P=e(),j=a(!1),B=a(l({code:"",buyPrice:"",stopSurplus:"",stopLoss:"",house:"",name:"",isExist:"",industry:""})),{columns:z,searchStockList:Z,stocksList:A,onCodeChange:D,onAddZcwStock:F,zcwlist:M,onBuyPriceBlur:T}=b(),{exportEecel:Y}=_(),$=async()=>{if(B.isExist)return void m.error("该股票已存在");await F(B.value)?(m.success("新增成功"),j.value=!1,Z(),B.value=l(B.value)):m.error("新增失败")},G=()=>{Y(A.value,z,`支撑位_${P.getters.getYMDate}`)};return s((()=>{Z()})),(e,a)=>{const l=u("a-button"),s=u("a-popconfirm"),b=u("a-input"),_=u("a-form-item"),q=u("a-input-number"),P=u("a-form"),F=u("a-modal");return o(),t(p,null,[n("div",k,[n("div",h,[C,n("div",x,[i(l,{onClick:a[0]||(a[0]=e=>j.value=!0)},{default:r((()=>[c("新增")])),_:1}),i(l,{onClick:G},{default:r((()=>[c("导出")])),_:1}),i(l,{type:"primary",onClick:a[1]||(a[1]=e=>d(Z)())},{default:r((()=>[c("刷新")])),_:1})])]),n("div",w,[i(y,{columns:d(z),stocksList:d(A)},{default:r((e=>[i(s,{title:"确定要删除这个股票?",onConfirm:a=>(async e=>{const a={list:[e]},{errcode:l,data:s}=await f(a);0==l&&(m.success("删除成功"),M.value=M.value.filter((a=>e!==a.code)))})(e.record.code)},{default:r((()=>[L])),_:2},1032,["onConfirm"])])),_:1},8,["columns","stocksList"])])]),i(F,{class:"infoTips",visible:j.value,"onUpdate:visible":a[9]||(a[9]=e=>j.value=e),width:"400px",onCancel:a[10]||(a[10]=e=>j.value=!1)},{title:r((()=>[E])),footer:r((()=>[i(l,{onClick:a[8]||(a[8]=e=>j.value=!1)},{default:r((()=>[c("取消")])),_:1}),i(l,{type:"primary",onClick:$},{default:r((()=>[c("确定")])),_:1})])),default:r((()=>[n("div",g,[i(P,{model:B.value,"label-col":{span:6},"wrapper-col":{span:18},autocomplete:"off"},{default:r((()=>[i(_,{label:"股票代码",rules:[{required:!0}]},{default:r((()=>[i(b,{value:B.value.code,"onUpdate:value":a[2]||(a[2]=e=>B.value.code=e),style:{width:"35%"},placeholder:"股票代码",onChange:a[3]||(a[3]=e=>d(D)(B.value))},null,8,["value"]),c("   "),B.value.isExist?(o(),t("span",S,v(B.value.name)+"（已存在）",1)):(o(),t("span",U,v(B.value.name)+v(B.value.industry),1))])),_:1}),i(_,{label:"买入价",rules:[{required:!0}]},{default:r((()=>[i(q,{value:B.value.buyPrice,"onUpdate:value":a[4]||(a[4]=e=>B.value.buyPrice=e),min:0,placeholder:"请输入股票买入价格",onBlur:a[5]||(a[5]=e=>d(T)(B.value))},null,8,["value"])])),_:1}),i(_,{label:"止盈",rules:[{required:!0}]},{default:r((()=>[i(q,{value:B.value.stopSurplus,"onUpdate:value":a[6]||(a[6]=e=>B.value.stopSurplus=e),min:0,placeholder:"请输入股票止盈价格"},null,8,["value"])])),_:1}),i(_,{label:"止损",rules:[{required:!0}]},{default:r((()=>[i(q,{value:B.value.stopLoss,"onUpdate:value":a[7]||(a[7]=e=>B.value.stopLoss=e),min:0,placeholder:"请输入股票止损价格"},null,8,["value"])])),_:1})])),_:1},8,["model"])])])),_:1},8,["visible"])],64)}}};export{q as default};
